custom_rules:
  - workflow/snakemake_rules/download_from_s3.smk

lat-longs: "config/lat_longs.tsv"

segments:
  - ha
  - na

tree:
  tree-builder-args: "'-ninit 10 -n 4 -czb'"

submission_date_field: date_submitted
recency:
  date_bins: [7, 30, 90]
  date_bin_labels: ["last week", "last month", "last quarter"]
  upper_bin_label: older

builds:
    h3n2:
      lineage: h3n2
      reference: "config/h3n2/{segment}/reference.fasta"
      annotation: "config/h3n2/{segment}/genemap.gff"
      tree_exclude_sites: "config/h3n2/{segment}/exclude-sites.txt"
      clades: "config/h3n2/ha/clades.tsv"
      subclades: "config/h3n2/{segment}/subclades.tsv"
      emerging_haplotypes: "config/h3n2/{segment}/emerging_haplotypes.tsv"
      auspice_config: "config/h3n2/{segment}/auspice_config.json"
      vaccines: "config/h3n2/vaccine.json"
      subsamples: &subsampling
        global:
            filters: "--subsample-max-sequences 300 --group-by region month --min-date 1Y --exclude-ambiguous-dates-by any --exclude-where 'ha!=True' 'na!=True'"
    h1n1pdm:
      lineage: h1n1pdm
      reference: "config/h1n1pdm/{segment}/reference.fasta"
      annotation: "config/h1n1pdm/{segment}/genemap.gff"
      tree_exclude_sites: "config/h1n1pdm/{segment}/exclude-sites.txt"
      clades: "config/h1n1pdm/ha/clades.tsv"
      subclades: "config/h1n1pdm/{segment}/subclades.tsv"
      emerging_haplotypes: "config/h1n1pdm/{segment}/emerging_haplotypes.tsv"
      auspice_config: "config/h1n1pdm/{segment}/auspice_config.json"
      vaccines: "config/h1n1pdm/vaccine.json"
      subsamples: *subsampling
    vic:
      lineage: vic
      reference: "config/vic/{segment}/reference.fasta"
      annotation: "config/vic/{segment}/genemap.gff"
      tree_exclude_sites: "config/vic/{segment}/exclude-sites.txt"
      clades: "config/vic/ha/clades.tsv"
      subclades: "config/vic/{segment}/subclades.tsv"
      emerging_haplotypes: "config/vic/{segment}/emerging_haplotypes.tsv"
      auspice_config: "config/vic/{segment}/auspice_config.json"
      vaccines: "config/vic/vaccine.json"
      subsamples: *subsampling
